{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/.vscode/react/calculator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import\"./App.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),hisList=_useState2[0],setHisList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),ansList=_useState4[0],setAnsList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),preflag=_useState6[0],setPreflag=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),popupOn=_useState8[0],setPopupOn=_useState8[1];var _useState9=useState('0'),_useState10=_slicedToArray(_useState9,2),inputs=_useState10[0],setInputs=_useState10[1];// used only at inputc()\n// !not important\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),flag=_useState12[0],setFlag=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),lcnt=_useState14[0],setLcnt=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),rcnt=_useState16[0],setRcnt=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),last=_useState18[0],setLast=_useState18[1];// just for avoiding error of eval()\n// !not important\nvar inputc=function inputc(c){var cals=['+','-','*','/','=','AC','del','('];var fours=['+','-','*','/'];var adds=['+','-'];var muls=['*','/'];if(preflag)setPreflag(false);if(c==='AC'){setInputs('0');setLcnt(0);setRcnt(0);return;}if(c===')'){if(rcnt>=lcnt||cals.indexOf(last)!==-1)return;setRcnt(rcnt+1);}else if(c==='('){if(cals.indexOf(last)===-1&&last!=='')return;setLcnt(lcnt+1);}if(c==='del'){setInputs(inputs.slice(0,-1));if(last==='(')setLcnt(lcnt-1);else if(last===')')setRcnt(rcnt-1);setLast(inputs[inputs.length-1]);}else if(c==='='){if(cals.indexOf(last)!==-1&&last!==')')return;else if(lcnt!==rcnt)return;var temp=eval(inputs).toString();if(temp.length>14)temp=temp.substr(0,14);if(hisList.length>4){setHisList(hisList.slice(1).concat(inputs));setAnsList(ansList.slice(1).concat(temp));}else{setHisList(hisList.concat(inputs));setAnsList(ansList.concat(temp));}setInputs(temp);setLast('');setLcnt(0);setRcnt(0);setPreflag(true);}else if(inputs.length>14)return;else if(inputs==='0'){if(cals.indexOf(c)!==-1&&c!=='-'&&c!=='(')return;else if(c==='-'){setInputs(inputs+c);setLast(c);}else{setInputs(c);setLast(c);}}else{if(last==='/'&&c==='0')return;else if(adds.indexOf(last)!==-1){if(fours.indexOf(c)!==-1){if(muls.indexOf(c)!==-1){if(flag){return;}}setInputs(inputs.slice(0,-1)+c);}else setInputs(inputs+c);}else if(muls.indexOf(last)!==-1){if(muls.indexOf(c)!==-1)setInputs(inputs.slice(0,-1)+c);else if(adds.indexOf(c)!==-1){if(c==='-')setInputs(inputs+c);setLast(c);setFlag(true);return;}else setInputs(inputs+c);}else setInputs(inputs+c);setLast(c);if(flag)setFlag(false);}};var ButtonWrapper=function ButtonWrapper(probs){var buttons=[];var lst=probs.lst,mrk=probs.mrk;var _loop=function _loop(i){buttons.push(/*#__PURE__*/_jsx(\"button\",{className:mrk[i],onClick:function onClick(){return inputc(lst[i]);},children:lst[i]},lst[i]));};for(var i=0;i<lst.length;i++){_loop(i);}return/*#__PURE__*/_jsx(\"div\",{className:\"buttonWrap\",children:buttons});};var PrintHistory=function PrintHistory(){var l=hisList.length;if(l===0)return/*#__PURE__*/_jsx(\"div\",{id:\"popupContent\",children:\"\\uC774\\uC804 \\uACC4\\uC0B0\\uC2DD\\uACFC \\uACB0\\uACFC\\uAC00 \\uC5EC\\uAE30\\uC5D0 \\uD45C\\uC2DC\\uB418\\uC5B4 \\uB2E4\\uC2DC \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"});var phistory=[];var _loop2=function _loop2(i){var temp=[];temp.push(/*#__PURE__*/_jsx(\"button\",{className:\"historyButton\",onClick:function onClick(){return setInputs(hisList[i]);},children:hisList[i]},'historyButton-'+i+'-0'));temp.push(/*#__PURE__*/_jsx(\"div\",{className:\"innerText\",children:\"=\"},'innerText-'+i));temp.push(/*#__PURE__*/_jsx(\"button\",{className:\"historyButton\",onClick:function onClick(){return setInputs(ansList[i]);},children:ansList[i]},'historyButton-'+i+'-1'));phistory.push(/*#__PURE__*/_jsx(\"div\",{className:\"historyButtonWrap\",children:temp},'historyButtonWrap-'+i));};for(var i=l-1;i>=0;i--){_loop2(i);}return phistory;};var PrintPre=function PrintPre(){if(preflag)return hisList[hisList.length-1]+' =';else if(ansList.length===0)return\"JMJ's calculator!\";else return'Ans = '+ansList[ansList.length-1];};return/*#__PURE__*/_jsxs(\"calculator\",{children:[/*#__PURE__*/_jsxs(\"screen\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"popupOn\",className:popupOn?\"hide\":\"\",children:/*#__PURE__*/_jsx(\"button\",{class:\"popupButton\",onClick:function onClick(){return setPopupOn(true);},children:\"\\u2606\"})}),/*#__PURE__*/_jsxs(\"div\",{id:\"popup\",className:popupOn?\"\":\"hide\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"popupOff\",children:/*#__PURE__*/_jsx(\"button\",{class:\"popupButton\",onClick:function onClick(){return setPopupOn(false);},children:\"\\u2605\"})}),/*#__PURE__*/_jsx(PrintHistory,{})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"answers\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"preanswer\",children:/*#__PURE__*/_jsx(PrintPre,{})}),/*#__PURE__*/_jsx(\"div\",{id:\"answer\",children:inputs})]})]}),/*#__PURE__*/_jsxs(\"calculatorbody\",{children:[/*#__PURE__*/_jsx(ButtonWrapper,{lst:['(',')','del','AC'],mrk:['cals','cals','cals','cals']}),/*#__PURE__*/_jsx(ButtonWrapper,{lst:['7','8','9','/'],mrk:['','','','cals']}),/*#__PURE__*/_jsx(ButtonWrapper,{lst:['4','5','6','*'],mrk:['','','','cals']}),/*#__PURE__*/_jsx(ButtonWrapper,{lst:['1','2','3','-'],mrk:['','','','cals']}),/*#__PURE__*/_jsx(ButtonWrapper,{lst:['0','.','=','+'],mrk:['','','ans','cals']})]})]});};export default App;","map":{"version":3,"sources":["C:/Users/user/.vscode/react/calculator/src/App.js"],"names":["React","useState","App","hisList","setHisList","ansList","setAnsList","preflag","setPreflag","popupOn","setPopupOn","inputs","setInputs","flag","setFlag","lcnt","setLcnt","rcnt","setRcnt","last","setLast","inputc","c","cals","fours","adds","muls","indexOf","slice","length","temp","eval","toString","substr","concat","ButtonWrapper","probs","buttons","lst","mrk","i","push","PrintHistory","l","phistory","PrintPre"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./App.scss\"\r\n\r\nconst App = () => {\r\n  const [hisList, setHisList] = useState([]);\r\n  const [ansList, setAnsList] = useState([]);\r\n  const [preflag, setPreflag] = useState(false);\r\n  const [popupOn, setPopupOn] = useState(false);\r\n  const [inputs, setInputs] = useState('0');\r\n\r\n  // used only at inputc()\r\n  // !not important\r\n  const [flag, setFlag] = useState(false);\r\n  const [lcnt, setLcnt] = useState(0);\r\n  const [rcnt, setRcnt] = useState(0);\r\n  const [last, setLast] = useState('');\r\n  \r\n  // just for avoiding error of eval()\r\n  // !not important\r\n  const inputc = (c) => {\r\n    const cals = ['+', '-', '*', '/', '=', 'AC', 'del', '('];\r\n    const fours = ['+', '-', '*', '/'];\r\n    const adds = ['+', '-'];\r\n    const muls = ['*', '/'];\r\n\r\n    if(preflag) setPreflag(false);\r\n\r\n    if(c === 'AC'){\r\n      setInputs('0');\r\n      setLcnt(0);\r\n      setRcnt(0);\r\n      return;\r\n    }\r\n\r\n    if(c === ')'){\r\n      if(rcnt >= lcnt || cals.indexOf(last) !== -1) return;\r\n      setRcnt(rcnt + 1);\r\n    }\r\n    else if(c === '('){\r\n      if(cals.indexOf(last) === -1 && last !== '') return;\r\n      setLcnt(lcnt + 1);\r\n    }\r\n\r\n    if(c === 'del'){\r\n      setInputs(inputs.slice(0, -1));\r\n      if(last === '(') setLcnt(lcnt - 1);\r\n      else if(last === ')') setRcnt(rcnt - 1);\r\n      setLast(inputs[inputs.length - 1]);\r\n    }\r\n    else if(c === '='){\r\n      if(cals.indexOf(last) !== -1 && last !== ')') return;\r\n      else if(lcnt !== rcnt) return;\r\n      let temp = eval(inputs).toString();\r\n      \r\n      if(temp.length > 14) temp = temp.substr(0, 14);\r\n      \r\n      if(hisList.length > 4){\r\n        setHisList(hisList.slice(1).concat(inputs));\r\n        setAnsList(ansList.slice(1).concat(temp));\r\n      }\r\n      else{\r\n        setHisList(hisList.concat(inputs));\r\n        setAnsList(ansList.concat(temp));\r\n      }\r\n      setInputs(temp);\r\n      setLast('');\r\n      setLcnt(0);\r\n      setRcnt(0);\r\n      setPreflag(true);\r\n    }\r\n    else if(inputs.length > 14) return;\r\n    else if(inputs === '0'){\r\n      if(cals.indexOf(c) !== -1 && c !== '-' && c !== '(') return;\r\n      else if(c === '-'){\r\n        setInputs(inputs + c);\r\n        setLast(c);\r\n      }\r\n      else{\r\n        setInputs(c);\r\n        setLast(c);\r\n      }\r\n    }\r\n    else{\r\n      if(last === '/' && c === '0') return;\r\n      else if(adds.indexOf(last) !== -1){\r\n        if(fours.indexOf(c) !== -1){\r\n          if(muls.indexOf(c) !== -1){\r\n            if(flag){\r\n              return;\r\n            }\r\n          }\r\n          setInputs(inputs.slice(0, -1) + c);\r\n        }\r\n        else setInputs(inputs + c);\r\n      }\r\n      else if(muls.indexOf(last) !== -1){\r\n        if(muls.indexOf(c) !== -1) setInputs(inputs.slice(0, -1) + c);\r\n        else if(adds.indexOf(c) !== -1){\r\n          if(c === '-') setInputs(inputs + c);\r\n          setLast(c);\r\n          setFlag(true);\r\n          return;\r\n        }\r\n        else setInputs(inputs + c);\r\n      }\r\n      else setInputs(inputs + c);\r\n      setLast(c);\r\n      if(flag) setFlag(false);\r\n    }\r\n  };\r\n\r\n  const ButtonWrapper = probs => {\r\n    let buttons =[];\r\n    const lst = probs.lst, mrk = probs.mrk;\r\n    for(let i = 0; i < lst.length; i++) buttons.push(<button className={mrk[i]} onClick={()=>inputc(lst[i])} key={lst[i]}>{lst[i]}</button>);\r\n    return <div className=\"buttonWrap\">{buttons}</div>;\r\n  };\r\n\r\n  const PrintHistory = () => {\r\n    let l = hisList.length;\r\n    if(l === 0) return <div id=\"popupContent\">이전 계산식과 결과가 여기에 표시되어 다시 사용할 수 있습니다.</div>;\r\n    \r\n    const phistory = [];\r\n    for(let i = l -1; i >= 0; i--){\r\n      let temp = [];\r\n      temp.push(<button className=\"historyButton\" key={'historyButton-'+i+'-0'} onClick={() => setInputs(hisList[i])}>{hisList[i]}</button>);\r\n      temp.push(<div className=\"innerText\" key={'innerText-'+i}>=</div>);\r\n      temp.push(<button className=\"historyButton\" key={'historyButton-'+i+'-1'} onClick={() => setInputs(ansList[i])}>{ansList[i]}</button>);\r\n      phistory.push(<div className='historyButtonWrap' key={'historyButtonWrap-'+i}>{temp}</div>);\r\n    }\r\n    return phistory;\r\n  }\r\n\r\n  const PrintPre = () => {\r\n    if(preflag) return hisList[hisList.length-1] + ' =';\r\n    else if(ansList.length === 0) return \"JMJ's calculator!\"\r\n    else return 'Ans = ' + ansList[ansList.length-1];\r\n  }\r\n\r\n  return (\r\n    <calculator>\r\n      <screen>\r\n        <div id=\"popupOn\" className={popupOn ? \"hide\" : \"\"}><button class=\"popupButton\" onClick={()=>setPopupOn(true)}>☆</button></div>\r\n        <div id=\"popup\" className={popupOn ? \"\" : \"hide\"}>\r\n          <div id=\"popupOff\"><button class=\"popupButton\" onClick={()=>setPopupOn(false)}>★</button></div>\r\n          <PrintHistory/>\r\n        </div>\r\n        <div id=\"answers\">\r\n          <div id=\"preanswer\"><PrintPre/></div>\r\n          <div id=\"answer\">{inputs}</div>\r\n        </div>\r\n      </screen>\r\n      <calculatorbody>\r\n        <ButtonWrapper lst={['(', ')', 'del', 'AC']} mrk={['cals', 'cals', 'cals', 'cals']}/>\r\n        <ButtonWrapper lst={['7', '8', '9', '/']} mrk={['', '', '', 'cals']}/>\r\n        <ButtonWrapper lst={['4', '5', '6', '*']} mrk={['', '', '', 'cals']}/>\r\n        <ButtonWrapper lst={['1', '2', '3', '-']} mrk={['', '', '', 'cals']}/>\r\n        <ButtonWrapper lst={['0', '.', '=', '+']} mrk={['', '', 'ans', 'cals']}/>\r\n      </calculatorbody>\r\n    </calculator>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}